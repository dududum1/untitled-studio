<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Untitled Studio — Film Emulation & Photo Editor</title>
    <meta name="description"
        content="150+ film emulations. WebGL rendering. Zero cloud. Privacy-first photo editing in your browser.">
    <link rel="icon" type="image/svg+xml" href="assets/icons/favicon.svg">
    <link rel="manifest" href="manifest.json">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;700&display=swap"
        rel="stylesheet">

    <!-- Icons -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <style>
        /* ── Design Tokens ─────────────────────────────────────── */
        :root {
            --hot-pink: #ed2788;
            --hot-pink-dim: rgba(237, 39, 136, 0.15);
            --moonstone: #3ca2c8;
            --moonstone-dim: rgba(60, 162, 200, 0.12);
            --bg: #080808;
            --surface: rgba(255, 255, 255, 0.04);
            --border: rgba(255, 255, 255, 0.08);
            --text: #eeeeee;
            --muted: rgba(255, 255, 255, 0.45);
            --font-sans: 'Outfit', system-ui, sans-serif;
            --font-mono: 'JetBrains Mono', monospace;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--font-sans);
            background: var(--bg);
            color: var(--text);
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
        }

        ::selection {
            background: var(--hot-pink);
            color: #fff;
        }

        /* ── Grain Overlay ─────────────────────────────────────── */
        .grain-overlay {
            position: fixed;
            inset: 0;
            z-index: 9998;
            pointer-events: none;
            opacity: 0.035;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
            background-size: 256px 256px;
            animation: grainShift 0.5s steps(1) infinite;
        }

        @keyframes grainShift {
            0% {
                background-position: 0 0;
            }

            20% {
                background-position: -50px -25px;
            }

            40% {
                background-position: 25px -50px;
            }

            60% {
                background-position: -25px 50px;
            }

            80% {
                background-position: 50px 25px;
            }

            100% {
                background-position: 0 0;
            }
        }

        /* ── CRT Scanlines ─────────────────────────────────────── */
        .crt-lines {
            position: fixed;
            inset: 0;
            z-index: 9997;
            pointer-events: none;
            background: repeating-linear-gradient(to bottom,
                    transparent 0px,
                    transparent 3px,
                    rgba(0, 0, 0, 0.08) 3px,
                    rgba(0, 0, 0, 0.08) 4px);
        }

        /* ── NAVBAR ────────────────────────────────────────────── */
        nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 100;
            height: 64px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 2rem;
            background: rgba(8, 8, 8, 0.75);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border);
            transition: background 0.3s;
        }

        .nav-logo {
            font-family: var(--font-mono);
            font-weight: 700;
            font-size: 1.1rem;
            letter-spacing: -0.03em;
            color: #fff;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .nav-logo .prompt {
            color: var(--hot-pink);
            animation: blink 1.2s step-end infinite;
        }

        @keyframes blink {
            50% {
                opacity: 0;
            }
        }

        .nav-links {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            list-style: none;
        }

        .nav-links a {
            font-family: var(--font-mono);
            font-size: 0.7rem;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            color: var(--muted);
            text-decoration: none;
            transition: color 0.2s;
        }

        .nav-links a:hover {
            color: #fff;
        }

        .nav-cta {
            font-family: var(--font-mono);
            font-size: 0.7rem;
            font-weight: 700;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            color: #fff !important;
            background: var(--hot-pink);
            padding: 8px 18px;
            text-decoration: none;
            transition: all 0.2s;
        }

        .nav-cta:hover {
            background: #ff3d9b;
            transform: translateY(-1px);
        }

        /* ── HERO ──────────────────────────────────────────────── */
        #hero {
            position: relative;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 8rem 2rem 6rem;
            overflow: hidden;
        }

        /* Radial glow bg */
        .hero-glow {
            position: absolute;
            border-radius: 50%;
            pointer-events: none;
        }

        .hero-glow-pink {
            width: 700px;
            height: 700px;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -55%);
            background: radial-gradient(circle, rgba(237, 39, 136, 0.12) 0%, transparent 70%);
            animation: pulseGlow 4s ease-in-out infinite alternate;
        }

        .hero-glow-blue {
            width: 500px;
            height: 500px;
            top: 60%;
            left: 60%;
            transform: translate(-50%, -50%);
            background: radial-gradient(circle, rgba(60, 162, 200, 0.09) 0%, transparent 70%);
            animation: pulseGlow 5s ease-in-out 1s infinite alternate-reverse;
        }

        @keyframes pulseGlow {
            from {
                opacity: 0.6;
                transform: translate(-50%, -55%) scale(0.95);
            }

            to {
                opacity: 1;
                transform: translate(-50%, -55%) scale(1.05);
            }
        }

        /* Floating film frame deco */
        .hero-frame {
            position: absolute;
            border: 1px solid rgba(237, 39, 136, 0.15);
            pointer-events: none;
            animation: floatDrift 8s ease-in-out infinite;
        }

        .hero-frame-1 {
            width: 160px;
            height: 100px;
            top: 15%;
            left: 8%;
            animation-duration: 7s;
        }

        .hero-frame-2 {
            width: 120px;
            height: 80px;
            top: 20%;
            right: 10%;
            border-color: rgba(60, 162, 200, 0.15);
            animation-duration: 9s;
            animation-delay: -3s;
        }

        .hero-frame-3 {
            width: 90px;
            height: 60px;
            bottom: 18%;
            left: 12%;
            border-color: rgba(237, 39, 136, 0.10);
            animation-duration: 11s;
            animation-delay: -5s;
        }

        .hero-frame-4 {
            width: 140px;
            height: 90px;
            bottom: 22%;
            right: 8%;
            border-color: rgba(60, 162, 200, 0.12);
            animation-duration: 8s;
            animation-delay: -1s;
        }

        @keyframes floatDrift {
            0% {
                transform: translateY(0px) rotate(-1deg);
            }

            50% {
                transform: translateY(-18px) rotate(1deg);
            }

            100% {
                transform: translateY(0px) rotate(-1deg);
            }
        }

        .hero-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-family: var(--font-mono);
            font-size: 0.65rem;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            color: var(--hot-pink);
            border: 1px solid rgba(237, 39, 136, 0.3);
            background: rgba(237, 39, 136, 0.07);
            padding: 6px 14px;
            margin-bottom: 2rem;
            animation: fadeUp 0.8s ease-out both;
        }

        .badge-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: var(--hot-pink);
            animation: blink 1.5s step-end infinite;
        }

        .hero-headline {
            font-family: var(--font-sans);
            font-weight: 900;
            font-size: clamp(3.5rem, 9vw, 8rem);
            line-height: 0.93;
            letter-spacing: -0.04em;
            margin-bottom: 1.5rem;
            animation: fadeUp 0.8s 0.15s ease-out both;
        }

        .hero-headline .line-white {
            color: #fff;
        }

        .hero-headline .line-gradient {
            background: linear-gradient(135deg, var(--hot-pink) 0%, #ff7ac6 50%, var(--moonstone) 100%);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            display: block;
        }

        .hero-subline {
            font-family: var(--font-mono);
            font-size: 0.9rem;
            color: var(--muted);
            margin-bottom: 0.75rem;
            letter-spacing: 0.05em;
            animation: fadeUp 0.8s 0.25s ease-out both;
        }

        /* Typewriter */
        .hero-typewriter {
            font-family: var(--font-mono);
            font-size: 1rem;
            color: var(--moonstone);
            letter-spacing: 0.08em;
            margin-bottom: 2.5rem;
            min-height: 1.6em;
            animation: fadeUp 0.8s 0.35s ease-out both;
        }

        .typewriter-prefix {
            color: var(--muted);
        }

        .typewriter-text {
            color: var(--moonstone);
        }

        .typewriter-cursor {
            display: inline-block;
            width: 0.6em;
            height: 1.1em;
            background: var(--moonstone);
            vertical-align: middle;
            margin-left: 2px;
            animation: blink 1s step-end infinite;
        }

        .hero-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
            flex-wrap: wrap;
            justify-content: center;
            animation: fadeUp 0.8s 0.45s ease-out both;
        }

        .btn-primary {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            font-family: var(--font-mono);
            font-size: 0.8rem;
            font-weight: 700;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            color: #fff;
            text-decoration: none;
            background: var(--hot-pink);
            padding: 14px 28px;
            position: relative;
            overflow: hidden;
            transition: all 0.3s;
        }

        .btn-primary::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.15), transparent);
            transform: translateX(-100%);
            transition: transform 0.4s ease;
        }

        .btn-primary:hover::before {
            transform: translateX(0);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 40px rgba(237, 39, 136, 0.4);
        }

        .btn-secondary {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-family: var(--font-mono);
            font-size: 0.75rem;
            font-weight: 500;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            color: var(--muted);
            text-decoration: none;
            border: 1px solid var(--border);
            padding: 13px 24px;
            transition: all 0.25s;
            background: var(--surface);
        }

        .btn-secondary:hover {
            color: #fff;
            border-color: rgba(255, 255, 255, 0.25);
            background: rgba(255, 255, 255, 0.07);
        }

        /* Hero scroll indicator */
        .hero-scroll {
            position: absolute;
            bottom: 2.5rem;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            animation: fadeUp 0.8s 0.8s ease-out both;
        }

        .hero-scroll span {
            font-family: var(--font-mono);
            font-size: 0.55rem;
            letter-spacing: 0.3em;
            text-transform: uppercase;
            color: rgba(255, 255, 255, 0.2);
        }

        .scroll-line {
            width: 1px;
            height: 48px;
            background: linear-gradient(to bottom, rgba(237, 39, 136, 0.6), transparent);
            animation: scrollDrop 1.5s ease-in-out infinite;
        }

        @keyframes scrollDrop {
            0% {
                transform: scaleY(0);
                transform-origin: top;
            }

            50% {
                transform: scaleY(1);
                transform-origin: top;
            }

            51% {
                transform: scaleY(1);
                transform-origin: bottom;
            }

            100% {
                transform: scaleY(0);
                transform-origin: bottom;
            }
        }

        @keyframes fadeUp {
            from {
                opacity: 0;
                transform: translateY(24px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ── STATS BAR ─────────────────────────────────────────── */
        #stats {
            position: relative;
            border-top: 1px solid var(--border);
            border-bottom: 1px solid var(--border);
            background: var(--surface);
            backdrop-filter: blur(10px);
            padding: 3rem 2rem;
        }

        .stats-grid {
            max-width: 900px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 0;
        }

        .stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.4rem;
            padding: 1rem;
            border-right: 1px solid var(--border);
            opacity: 0;
            transform: translateY(16px);
            transition: opacity 0.5s ease, transform 0.5s ease;
        }

        .stat-item:last-child {
            border-right: none;
        }

        .stat-item.reveal {
            opacity: 1;
            transform: none;
        }

        .stat-number {
            font-family: var(--font-mono);
            font-size: clamp(1.8rem, 4vw, 2.8rem);
            font-weight: 700;
            color: #fff;
            line-height: 1;
        }

        .stat-number .stat-accent {
            color: var(--hot-pink);
        }

        .stat-number .stat-accent-blue {
            color: var(--moonstone);
        }

        .stat-label {
            font-family: var(--font-mono);
            font-size: 0.6rem;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            color: var(--muted);
            text-align: center;
        }

        /* ── FEATURES ──────────────────────────────────────────── */
        #features {
            padding: 7rem 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .section-label {
            font-family: var(--font-mono);
            font-size: 0.65rem;
            letter-spacing: 0.3em;
            text-transform: uppercase;
            color: var(--hot-pink);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-label::after {
            content: '';
            flex: 1;
            height: 1px;
            background: var(--border);
            max-width: 80px;
        }

        .section-headline {
            font-size: clamp(2rem, 5vw, 3.5rem);
            font-weight: 900;
            letter-spacing: -0.03em;
            line-height: 1.05;
            margin-bottom: 1rem;
        }

        .section-desc {
            color: var(--muted);
            font-size: 1rem;
            line-height: 1.7;
            max-width: 520px;
            margin-bottom: 4rem;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5px;
            background: var(--border);
        }

        .feature-card {
            background: #0e0e0e;
            padding: 2.5rem 2rem;
            position: relative;
            overflow: hidden;
            transition: background 0.3s, transform 0.2s;
            opacity: 0;
            transform: translateY(30px);
            cursor: default;
        }

        .feature-card.reveal {
            opacity: 1;
            transform: translateY(0);
            transition: opacity 0.5s ease, transform 0.5s ease, background 0.3s, box-shadow 0.3s;
        }

        .feature-card::before {
            content: '';
            position: absolute;
            inset: 0;
            background: radial-gradient(circle at var(--mx, 50%) var(--my, 50%), rgba(237, 39, 136, 0.08) 0%, transparent 60%);
            opacity: 0;
            transition: opacity 0.35s;
        }

        .feature-card:hover::before {
            opacity: 1;
        }

        .feature-card:hover {
            background: #111;
            z-index: 2;
        }

        .feature-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1.5rem;
            font-size: 1.5rem;
            position: relative;
        }

        .feature-icon-pink {
            background: rgba(237, 39, 136, 0.12);
            color: var(--hot-pink);
        }

        .feature-icon-blue {
            background: rgba(60, 162, 200, 0.12);
            color: var(--moonstone);
        }

        .feature-icon-green {
            background: rgba(74, 222, 128, 0.1);
            color: #4ade80;
        }

        .feature-icon-amber {
            background: rgba(251, 191, 36, 0.1);
            color: #fbbf24;
        }

        .feature-icon-purple {
            background: rgba(167, 139, 250, 0.1);
            color: #a78bfa;
        }

        .feature-icon-red {
            background: rgba(248, 113, 113, 0.1);
            color: #f87171;
        }

        .feature-card h3 {
            font-size: 1.1rem;
            font-weight: 700;
            letter-spacing: -0.02em;
            margin-bottom: 0.6rem;
        }

        .feature-card p {
            font-size: 0.875rem;
            line-height: 1.65;
            color: var(--muted);
        }

        .feature-tag-row {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            margin-top: 1.2rem;
        }

        .feature-tag {
            font-family: var(--font-mono);
            font-size: 0.6rem;
            letter-spacing: 0.08em;
            text-transform: uppercase;
            padding: 3px 8px;
            border: 1px solid var(--border);
            color: var(--muted);
        }

        .feature-tag.pink {
            border-color: rgba(237, 39, 136, 0.3);
            color: var(--hot-pink);
        }

        .feature-tag.blue {
            border-color: rgba(60, 162, 200, 0.3);
            color: var(--moonstone);
        }

        .feature-tag.green {
            border-color: rgba(74, 222, 128, 0.3);
            color: #4ade80;
        }

        /* ── FILM REEL TICKER ──────────────────────────────────── */
        #film-reel {
            padding: 5rem 0;
            overflow: hidden;
            border-top: 1px solid var(--border);
            border-bottom: 1px solid var(--border);
            background: #060606;
        }

        .reel-header {
            text-align: center;
            margin-bottom: 3rem;
            padding: 0 2rem;
        }

        .reel-subtext {
            font-family: var(--font-mono);
            font-size: 0.7rem;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            color: var(--muted);
            margin-bottom: 0.75rem;
        }

        .reel-headline {
            font-size: clamp(1.8rem, 4vw, 2.8rem);
            font-weight: 900;
            letter-spacing: -0.03em;
        }

        .reel-count {
            font-family: var(--font-mono);
            color: var(--hot-pink);
        }

        .ticker-wrap {
            position: relative;
            margin-bottom: 1rem;
        }

        .ticker-fade-left {
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            width: 120px;
            background: linear-gradient(to right, #060606, transparent);
            z-index: 2;
            pointer-events: none;
        }

        .ticker-fade-right {
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            width: 120px;
            background: linear-gradient(to left, #060606, transparent);
            z-index: 2;
            pointer-events: none;
        }

        .ticker-row {
            display: flex;
            width: max-content;
            gap: 0;
        }

        .ticker-row-1 {
            animation: marqueeL 40s linear infinite;
        }

        .ticker-row-2 {
            animation: marqueeR 35s linear infinite;
            margin-top: 0.5rem;
        }

        @keyframes marqueeL {
            0% {
                transform: translateX(0);
            }

            100% {
                transform: translateX(-50%);
            }
        }

        @keyframes marqueeR {
            0% {
                transform: translateX(-50%);
            }

            100% {
                transform: translateX(0);
            }
        }

        .ticker-row:hover {
            animation-play-state: paused;
        }

        .film-chip {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            font-family: var(--font-mono);
            font-size: 0.75rem;
            letter-spacing: 0.05em;
            white-space: nowrap;
            padding: 10px 20px;
            border-right: 1px solid var(--border);
            color: var(--muted);
            transition: color 0.2s, background 0.2s;
        }

        .film-chip:hover {
            color: #fff;
            background: var(--surface);
            cursor: default;
        }

        .film-chip .chip-dot {
            width: 5px;
            height: 5px;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .chip-dot-kodak {
            background: #FFC700;
        }

        .chip-dot-fuji {
            background: #4ade80;
        }

        .chip-dot-ilford {
            background: #e5e5e5;
        }

        .chip-dot-retro {
            background: #f87171;
        }

        .chip-dot-cinema {
            background: var(--moonstone);
        }

        .chip-dot-boutiq {
            background: var(--hot-pink);
        }

        .chip-dot-eastern {
            background: #fbbf24;
        }

        /* ── PHILOSOPHY CTA ────────────────────────────────────── */
        #philosophy {
            padding: 7rem 2rem;
            max-width: 900px;
            margin: 0 auto;
        }

        .philosophy-inner {
            border: 2px solid var(--hot-pink);
            box-shadow: 12px 12px 0 var(--moonstone);
            padding: 4rem 3rem;
            position: relative;
            overflow: hidden;
            opacity: 0;
            transform: translateY(40px);
            transition: opacity 0.7s ease, transform 0.7s ease;
        }

        .philosophy-inner.reveal {
            opacity: 1;
            transform: none;
        }

        .philosophy-inner::before {
            content: 'UNMASKED';
            position: absolute;
            right: -20px;
            bottom: -30px;
            font-size: 8rem;
            font-weight: 900;
            color: rgba(255, 255, 255, 0.03);
            font-family: var(--font-mono);
            letter-spacing: -0.05em;
            pointer-events: none;
            user-select: none;
        }

        .phil-label {
            font-family: var(--font-mono);
            font-size: 0.6rem;
            letter-spacing: 0.3em;
            text-transform: uppercase;
            color: var(--hot-pink);
            margin-bottom: 1.5rem;
        }

        .phil-headline {
            font-size: clamp(2rem, 5vw, 3.2rem);
            font-weight: 900;
            letter-spacing: -0.03em;
            line-height: 1.05;
            margin-bottom: 1.5rem;
            font-style: italic;
        }

        .phil-body {
            color: var(--muted);
            font-size: 1rem;
            line-height: 1.75;
            margin-bottom: 2.5rem;
            max-width: 540px;
        }

        .phil-declarations {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            margin-bottom: 2.5rem;
        }

        .phil-declarations li {
            font-family: var(--font-mono);
            font-size: 0.875rem;
            color: rgba(255, 255, 255, 0.7);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .phil-check {
            color: var(--hot-pink);
            font-weight: 700;
        }

        /* ── FOOTER ────────────────────────────────────────────── */
        footer {
            border-top: 1px solid var(--border);
            padding: 3rem 2rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 1.5rem;
        }

        .footer-logo {
            font-family: var(--font-mono);
            font-weight: 700;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.4);
            text-decoration: none;
            letter-spacing: -0.02em;
        }

        .footer-logo span {
            color: var(--hot-pink);
        }

        .footer-links {
            display: flex;
            gap: 1.5rem;
            list-style: none;
        }

        .footer-links a {
            font-family: var(--font-mono);
            font-size: 0.65rem;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            color: var(--muted);
            text-decoration: none;
            transition: color 0.2s;
        }

        .footer-links a:hover {
            color: #fff;
        }

        .footer-copy {
            font-family: var(--font-mono);
            font-size: 0.6rem;
            letter-spacing: 0.08em;
            color: rgba(255, 255, 255, 0.2);
        }

        /* ── RESPONSIVE ────────────────────────────────────────── */
        @media (max-width: 900px) {
            .features-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .stat-item:nth-child(2) {
                border-right: none;
            }

            .stat-item:nth-child(3) {
                border-right: 1px solid var(--border);
            }

            .nav-links {
                display: none;
            }
        }

        @media (max-width: 600px) {
            .features-grid {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .philosophy-inner {
                padding: 2.5rem 1.5rem;
            }

            .hero-frame {
                display: none;
            }

            .scopes-grid {
                grid-template-columns: 1fr;
            }
        }

        /* ── SCOPES SECTION ─────────────────────────────────── */
        #scopes {
            padding: 6rem 2rem;
            background: #050505;
            border-top: 1px solid var(--border);
        }

        .scopes-inner {
            max-width: 1200px;
            margin: 0 auto;
        }

        .scopes-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5px;
            background: var(--border);
            margin-top: 3rem;
        }

        .scope-card {
            background: #0a0a0a;
            padding: 1.5rem;
            opacity: 1;
        }

        .scope-card.reveal {
            opacity: 1;
            transform: none;
        }

        .scope-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .scope-title {
            font-family: var(--font-mono);
            font-size: 0.6rem;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            color: var(--muted);
        }

        .scope-live {
            font-family: var(--font-mono);
            font-size: 0.55rem;
            letter-spacing: 0.15em;
            color: #4ade80;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .scope-live::before {
            content: '';
            width: 5px;
            height: 5px;
            border-radius: 50%;
            background: #4ade80;
            animation: blink 1.5s step-end infinite;
        }

        .scope-canvas {
            width: 100%;
            display: block;
            background: #000;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .scope-meta {
            display: flex;
            gap: 10px;
            margin-top: 0.75rem;
            flex-wrap: wrap;
        }

        .scope-tag {
            font-family: var(--font-mono);
            font-size: 0.55rem;
            letter-spacing: 0.08em;
            text-transform: uppercase;
            color: var(--muted);
            background: var(--surface);
            border: 1px solid var(--border);
            padding: 2px 7px;
        }

        .scope-tag.r {
            color: #f87171;
            border-color: rgba(248, 113, 113, 0.3);
        }

        .scope-tag.g {
            color: #4ade80;
            border-color: rgba(74, 222, 128, 0.3);
        }

        .scope-tag.b {
            color: #60a5fa;
            border-color: rgba(96, 165, 250, 0.3);
        }

        .scope-tag.y {
            color: #fbbf24;
            border-color: rgba(251, 191, 36, 0.3);
        }

        /* Particles canvas on hero */
        #particles-canvas {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        #hero>*:not(#particles-canvas) {
            position: relative;
            z-index: 1;
        }

        /* ── FX SHOWCASE ─────────────────────────────────────── */
        .fx-tabs-nav {
            display: flex;
            gap: 0;
            border: 1px solid var(--border);
            margin-bottom: 1.5px;
            width: fit-content;
        }

        .fx-tab-btn {
            font-family: var(--font-mono);
            font-size: 0.65rem;
            font-weight: 600;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            color: var(--muted);
            background: #0a0a0a;
            border: none;
            border-right: 1px solid var(--border);
            padding: 10px 20px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .fx-tab-btn:last-child {
            border-right: none;
        }

        .fx-tab-btn:hover {
            color: #fff;
            background: #111;
        }

        .fx-tab-btn.active {
            color: var(--hot-pink);
            background: rgba(237, 39, 136, 0.07);
        }

        .fx-panel {
            display: none;
        }

        .fx-panel.active {
            display: block;
            animation: fadeUp 0.35s ease-out;
        }

        .fx-panel-inner {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5px;
            background: var(--border);
        }

        .fx-panel-left {
            background: #0a0a0a;
            padding: 2.5rem 2rem;
        }

        .fx-panel-right {
            background: #060606;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 1rem;
        }

        .fx-panel-badge {
            font-family: var(--font-mono);
            font-size: 0.55rem;
            letter-spacing: 0.25em;
            text-transform: uppercase;
            color: var(--hot-pink);
            border: 1px solid rgba(237, 39, 136, 0.25);
            padding: 3px 10px;
            display: inline-block;
            margin-bottom: 1rem;
        }

        .fx-panel-title {
            font-size: clamp(1.5rem, 3vw, 2.2rem);
            font-weight: 900;
            letter-spacing: -0.03em;
            line-height: 1.05;
            margin-bottom: 0.75rem;
        }

        .fx-panel-desc {
            font-size: 0.875rem;
            color: var(--muted);
            line-height: 1.65;
            margin-bottom: 1.5rem;
        }

        .fx-items {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .fx-item {
            display: flex;
            gap: 12px;
            align-items: flex-start;
        }

        .fx-item-icon {
            width: 36px;
            height: 36px;
            min-width: 36px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
        }

        .fx-item-name {
            font-size: 0.8rem;
            font-weight: 700;
            margin-bottom: 2px;
            letter-spacing: -0.01em;
        }

        .fx-item-desc {
            font-size: 0.75rem;
            color: var(--muted);
            line-height: 1.5;
        }

        .fx-controls {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--border);
        }

        .fx-ctrl {
            display: flex;
            align-items: center;
            gap: 10px;
            font-family: var(--font-mono);
            font-size: 0.65rem;
            color: var(--muted);
        }

        .fx-ctrl>span:first-child {
            width: 70px;
            flex-shrink: 0;
        }

        .fx-ctrl>span:last-child {
            width: 28px;
            text-align: right;
            color: rgba(255, 255, 255, 0.6);
        }

        .fx-slider {
            flex: 1;
            height: 2px;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 99px;
            position: relative;
        }

        .fx-slider-fill {
            height: 100%;
            background: var(--hot-pink);
            border-radius: 99px;
            position: relative;
        }

        .fx-slider-fill::after {
            content: '';
            position: absolute;
            right: -4px;
            top: 50%;
            transform: translateY(-50%);
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #fff;
            box-shadow: 0 0 6px rgba(237, 39, 136, 0.6);
        }

        .fx-canvas {
            width: 100%;
            display: block;
            background: #000;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .fx-canvas-label {
            font-family: var(--font-mono);
            font-size: 0.55rem;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            color: rgba(255, 255, 255, 0.2);
        }

        .fx-lens-demo {
            position: relative;
            width: 200px;
            height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .lens-ring {
            position: absolute;
            border-radius: 50%;
            border: 1px solid;
        }

        .lens-ring-1 {
            width: 180px;
            height: 180px;
            border-color: rgba(237, 39, 136, 0.2);
            animation: spinSlow 12s linear infinite;
        }

        .lens-ring-2 {
            width: 130px;
            height: 130px;
            border-color: rgba(60, 162, 200, 0.15);
            animation: spinSlow 8s linear infinite reverse;
        }

        .lens-ring-3 {
            width: 80px;
            height: 80px;
            border-color: rgba(237, 39, 136, 0.1);
            animation: spinSlow 5s linear infinite;
        }

        .lens-center {
            z-index: 1;
        }

        .lens-flare {
            position: absolute;
            width: 4px;
            height: 4px;
            border-radius: 50%;
            background: var(--hot-pink);
            top: 20px;
            left: 60px;
            box-shadow: 0 0 12px 4px rgba(237, 39, 136, 0.4);
            animation: flarePulse 2.5s ease-in-out infinite;
        }

        @keyframes spinSlow {
            to {
                transform: rotate(360deg);
            }
        }

        @keyframes flarePulse {

            0%,
            100% {
                opacity: 0.4;
                transform: scale(1);
            }

            50% {
                opacity: 1;
                transform: scale(1.6);
            }
        }

        .fx-texture-demo {
            justify-content: flex-start;
        }

        .texture-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5px;
            background: var(--border);
            width: 100%;
        }

        .texture-cell {
            height: 90px;
            display: flex;
            align-items: flex-end;
            padding: 6px;
            font-family: var(--font-mono);
            font-size: 0.55rem;
            letter-spacing: 0.1em;
            color: rgba(255, 255, 255, 0.25);
            text-transform: uppercase;
        }

        @media (max-width: 900px) {
            .fx-panel-inner {
                grid-template-columns: 1fr;
            }

            .fx-panel-right {
                display: none;
            }

            .fx-tabs-nav {
                overflow-x: auto;
            }
        }

/* ── PRESET SHOWCASE ─────────────────────────────────────── */
        .ps-wrap {
            display: grid;
            grid-template-columns: 1.1fr 0.9fr;
            gap: 0;
            max-width: 1200px;
            margin: 3rem auto 0;
            padding: 0 2rem;
            align-items: center;
        }
        .ps-canvas-side { position: relative; }
        .ps-canvas-frame {
            position: relative;
            width: 100%;
            aspect-ratio: 4/3;
            background: #000;
            overflow: hidden;
        }
        .ps-canvas {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
        }
        .ps-canvas-b { opacity: 0; transition: opacity 0.8s ease; }
        .ps-canvas-b.visible { opacity: 1; }
        .ps-film-badge {
            position: absolute;
            top: 12px; right: 12px;
            font-family: var(--font-mono);
            font-size: 0.5rem;
            letter-spacing: 0.25em;
            color: rgba(255,255,255,0.4);
            border: 1px solid rgba(255,255,255,0.12);
            padding: 3px 8px;
            z-index: 10;
        }
        .ps-corner {
            position: absolute;
            width: 16px; height: 16px;
            z-index: 10;
        }
        .ps-corner-tl { top:0; left:0; border-top:1px solid rgba(237,39,136,0.4); border-left:1px solid rgba(237,39,136,0.4); }
        .ps-corner-tr { top:0; right:0; border-top:1px solid rgba(237,39,136,0.4); border-right:1px solid rgba(237,39,136,0.4); }
        .ps-corner-bl { bottom:0; left:0; border-bottom:1px solid rgba(237,39,136,0.4); border-left:1px solid rgba(237,39,136,0.4); }
        .ps-corner-br { bottom:0; right:0; border-bottom:1px solid rgba(237,39,136,0.4); border-right:1px solid rgba(237,39,136,0.4); }

        .ps-info-side {
            padding: 2rem 2rem 2rem 3rem;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }
        .ps-brand {
            font-family: var(--font-mono);
            font-size: 0.6rem;
            letter-spacing: 0.25em;
            text-transform: uppercase;
            color: var(--hot-pink);
        }
        .ps-name {
            font-size: clamp(1.6rem, 3.5vw, 2.4rem);
            font-weight: 900;
            letter-spacing: -0.03em;
            line-height: 1.0;
        }
        .ps-desc {
            font-size: 0.875rem;
            color: var(--muted);
            line-height: 1.6;
            max-width: 380px;
        }
        .ps-tags { display: flex; gap: 6px; flex-wrap: wrap; }
        .ps-tag {
            font-family: var(--font-mono);
            font-size: 0.55rem;
            letter-spacing: 0.12em;
            text-transform: uppercase;
            color: rgba(255,255,255,0.4);
            border: 1px solid rgba(255,255,255,0.1);
            padding: 3px 10px;
        }
        .ps-meta { display: flex; gap: 1rem; margin-top: 0.25rem; }
        .ps-meta-item {
            font-family: var(--font-mono);
            font-size: 0.6rem;
            color: rgba(255,255,255,0.3);
            display: flex;
            align-items: center;
            gap: 4px;
        }
        .ps-progress-wrap { margin-top: 0.5rem; }
        .ps-progress-bar {
            width: 100%;
            height: 1px;
            background: rgba(255,255,255,0.08);
            position: relative;
            margin-bottom: 8px;
        }
        .ps-progress-fill {
            height: 100%;
            background: var(--hot-pink);
            width: 0%;
            transition: width 0.1s linear;
        }
        .ps-progress-label {
            font-family: var(--font-mono);
            font-size: 0.55rem;
            color: rgba(255,255,255,0.3);
            letter-spacing: 0.1em;
        }
        .ps-dots { display: flex; gap: 6px; flex-wrap: wrap; margin-top: 0.75rem; }
        .ps-dot {
            width: 6px; height: 6px;
            border-radius: 50%;
            background: rgba(255,255,255,0.1);
            cursor: pointer;
            transition: all 0.3s;
            border: none;
            padding: 0;
        }
        .ps-dot.active { background: var(--hot-pink); transform: scale(1.3); }
        .ps-nav-btns { display: flex; gap: 8px; margin-top: 0.5rem; }
        .ps-nav-btn {
            width: 36px; height: 36px;
            border: 1px solid var(--border);
            background: #0a0a0a;
            color: var(--muted);
            cursor: pointer;
            display: flex; align-items: center; justify-content: center;
            font-size: 1rem;
            transition: all 0.2s;
        }
        .ps-nav-btn:hover { background: #111; color: #fff; border-color: rgba(237,39,136,0.3); }
        .ps-play-btn { margin-left: auto; }
        @media (max-width: 768px) {
            .ps-wrap { grid-template-columns: 1fr; }
            .ps-info-side { padding: 1.5rem 0 0; }
        }
    </style>
</head>

<body>

    <!-- Grain + CRT -->
    <div class="grain-overlay"></div>
    <div class="crt-lines"></div>

    <!-- ── NAVBAR ──────────────────────────────────────────── -->
    <nav>
        <a href="landing.html" class="nav-logo">
            <span class="prompt">&gt;_</span> UNTITLED STUDIO
        </a>
        <ul class="nav-links">
            <li><a href="#features">Features</a></li>
            <li><a href="#scopes">Scopes</a></li>
            <li><a href="#film-reel">Film Library</a></li>
            <li><a href="how-to.html">Docs</a></li>
            <li><a href="#fx-showcase">FX</a></li>
            <li><a href="https://untitled-40w.pages.dev/" class="nav-cta">Open Editor</a></li>
        </ul>
    </nav>

    <!-- ── HERO ───────────────────────────────────────────── -->
    <section id="hero">
        <div class="hero-glow hero-glow-pink"></div>
        <div class="hero-glow hero-glow-blue"></div>

        <!-- Decorative drifting film frames -->
        <div class="hero-frame hero-frame-1"></div>
        <div class="hero-frame hero-frame-2"></div>
        <div class="hero-frame hero-frame-3"></div>
        <div class="hero-frame hero-frame-4"></div>

        <div class="hero-badge">
            <span class="badge-dot"></span>
            Version 3.0 — Privacy-First · WebGL 2.0 · PWA
        </div>

        <h1 class="hero-headline">
            <span class="line-white">UNTITLED</span>
            <span class="line-gradient">STUDIO</span>
        </h1>

        <p class="hero-subline">Professional film emulation. Zero cloud. 100% in your browser.</p>

        <div class="hero-typewriter" id="hero-typewriter">
            <span class="typewriter-prefix">now loading / </span><span class="typewriter-text" id="tw-text"></span><span
                class="typewriter-cursor"></span>
        </div>

        <div class="hero-actions">
            <a href="https://untitled-40w.pages.dev/" class="btn-primary">
                <i class="ph ph-camera"></i>
                Open Editor
            </a>
            <a href="#film-reel" class="btn-secondary">
                <i class="ph ph-film-strip"></i>
                Browse Film Library
            </a>
        </div>

        <div class="hero-scroll">
            <span>Scroll</span>
            <div class="scroll-line"></div>
        </div>
    </section>

    <!-- ── STATS BAR ───────────────────────────────────────── -->
    <section id="stats">
        <div class="stats-grid" id="stats-grid">
            <div class="stat-item" style="transition-delay: 0s">
                <div class="stat-number"><span class="stat-accent" data-target="150" data-suffix="+">0</span></div>
                <div class="stat-label">Film Emulations</div>
            </div>
            <div class="stat-item" style="transition-delay: 0.1s">
                <div class="stat-number"><span class="stat-accent-blue" data-target="0">0</span><span
                        class="stat-accent"> accounts</span></div>
                <div class="stat-label">No Sign-Up Required</div>
            </div>
            <div class="stat-item" style="transition-delay: 0.2s">
                <div class="stat-number"><span class="stat-accent" data-target="100" data-suffix="%">0</span></div>
                <div class="stat-label">Offline Capable</div>
            </div>
            <div class="stat-item" style="transition-delay: 0.3s">
                <div class="stat-number"><span class="stat-accent-blue" data-target="0">0</span><span
                        class="stat-accent"> cloud</span></div>
                <div class="stat-label">Your Photos Stay Local</div>
            </div>
        </div>
    </section>

    <!-- ── FEATURES ───────────────────────────────────────── -->
    <section id="features">
        <div class="section-label">Core Capabilities</div>
        <h2 class="section-headline">
            A <span style="color:var(--hot-pink)">darkroom</span><br>
            in your browser.
        </h2>
        <p class="section-desc">
            From 150+ hand-crafted analog emulations to on-device AI masking — every tool runs client-side, offline,
            with no data ever leaving your device.
        </p>

        <div class="features-grid" id="features-grid">

            <!-- Card 1: Film Emulation -->
            <div class="feature-card" style="transition-delay:0s" data-reveal>
                <div class="feature-icon feature-icon-pink">
                    <i class="ph ph-film-strip"></i>
                </div>
                <h3>Film Roll Archive</h3>
                <p>Physics-based analog engine simulating grain structure, halation, and chemical color shifts across
                    150+ emulations — Kodak, Fuji, Ilford, Cinestill, Eastern Bloc, and more.</p>
                <div class="feature-tag-row">
                    <span class="feature-tag pink">Kodak</span>
                    <span class="feature-tag">Fuji</span>
                    <span class="feature-tag">Ilford</span>
                    <span class="feature-tag">Cinestill</span>
                    <span class="feature-tag">Eastern Bloc</span>
                </div>
            </div>

            <!-- Card 2: WebGL Rendering -->
            <div class="feature-card" style="transition-delay:0.08s" data-reveal>
                <div class="feature-icon feature-icon-blue">
                    <i class="ph ph-cube"></i>
                </div>
                <h3>WebGL 2.0 Pipeline</h3>
                <p>Real-time rendering via custom GLSL shaders. Grain is offloaded to a Rust/WebAssembly module. Even
                    4K+ images render without a stutter.</p>
                <div class="feature-tag-row">
                    <span class="feature-tag blue">WebGL 2.0</span>
                    <span class="feature-tag">Rust + WASM</span>
                    <span class="feature-tag">4K Export</span>
                </div>
            </div>

            <!-- Card 3: Color Grading -->
            <div class="feature-card" style="transition-delay:0.16s" data-reveal>
                <div class="feature-icon feature-icon-purple">
                    <i class="ph ph-palette"></i>
                </div>
                <h3>Cinema Color Grading</h3>
                <p>4-channel tone curves, HSL mixer, color wheels, split toning, cinema print emulation (Kodak 2383,
                    Fuji 3513) and .cube LUT import/export.</p>
                <div class="feature-tag-row">
                    <span class="feature-tag">Curves</span>
                    <span class="feature-tag">HSL</span>
                    <span class="feature-tag">LUT</span>
                    <span class="feature-tag">Color Wheels</span>
                </div>
            </div>

            <!-- Card 4: Neural AI -->
            <div class="feature-card" style="transition-delay:0.24s" data-reveal>
                <div class="feature-icon feature-icon-green">
                    <i class="ph ph-brain"></i>
                </div>
                <h3>Neural Darkroom</h3>
                <p>On-device AI via ONNX Runtime Web. Magic Eraser removes objects with LaMa inpainting. Smart Select
                    isolates subjects with MODNet segmentation. All 100% offline.</p>
                <div class="feature-tag-row">
                    <span class="feature-tag green">ONNX Runtime</span>
                    <span class="feature-tag green">On-Device</span>
                    <span class="feature-tag">No Upload</span>
                </div>
            </div>


            <!-- Card 5: FX & Optics -->
            <div class="feature-card" style="transition-delay:0.32s" data-reveal>
                <div class="feature-icon feature-icon-amber">
                    <i class="ph ph-sparkle"></i>
                </div>
                <h3>FX &amp; Optics</h3>
                <p>5 dedicated effect tabs &mdash; Grain, Lens Optics, Cinematic, Digital, and Texture &mdash; each with live canvas previews.</p>
                <div class="feature-tag-row">
                    <span class="feature-tag">Halation</span>
                    <span class="feature-tag">Grain</span>
                    <span class="feature-tag">Dither</span>
                    <span class="feature-tag">Gate Weave</span>
                </div>
            </div>

            <!-- Card 6: Workflow -->
            <div class="feature-card" style="transition-delay:0.40s" data-reveal>
                <div class="feature-icon feature-icon-red">
                    <i class="ph ph-stack"></i>
                </div>
                <h3>Film Roll Workflow</h3>
                <p>Group up to 36 images into a roll. Sync your grade across all frames at once. Batch export as ZIP. Full undo/redo and split view.</p>
                <div class="feature-tag-row">
                    <span class="feature-tag">Batch Edit</span>
                    <span class="feature-tag">Split View</span>
                    <span class="feature-tag">History</span>
                    <span class="feature-tag">EXIF</span>
                </div>
            </div>

        </div>
    </section>

    <!-- ── FX SUBTAB SHOWCASE ─────────────────────────────── -->
    <section id="fx-showcase" style="padding:7rem 2rem; max-width:1200px; margin:0 auto;">
        <div class="section-label" style="color:var(--hot-pink)">FX &amp; Optics</div>
        <h2 class="section-headline">Every effect,<br><span style="color:var(--hot-pink)">its own stage.</span></h2>
        <p class="section-desc">Five dedicated FX tabs &mdash; each packed with controls that go far beyond a single slider.</p>
        <div class="fx-tabs-nav" id="fx-tabs-nav">
            <button class="fx-tab-btn active" data-tab="grain"><i class="ph ph-dots-nine"></i> Grain</button>
            <button class="fx-tab-btn" data-tab="lens"><i class="ph ph-eye"></i> Lens Optics</button>
            <button class="fx-tab-btn" data-tab="cinema"><i class="ph ph-film-reel"></i> Cinematic</button>
            <button class="fx-tab-btn" data-tab="digital"><i class="ph ph-circuit-board"></i> Digital</button>
            <button class="fx-tab-btn" data-tab="texture"><i class="ph ph-squares-four"></i> Texture</button>
        </div>

        <!-- GRAIN -->
        <div class="fx-panel active" id="fx-grain">
          <div class="fx-panel-inner">
            <div class="fx-panel-left">
              <div class="fx-panel-badge">Grain Engine</div>
              <h3 class="fx-panel-title">Silver Halide<br>Simulation</h3>
              <p class="fx-panel-desc">Two physically distinct grain types rendered by a Rust/WASM engine &mdash; zero stutter even at 4K.</p>
              <div class="fx-items">
                <div class="fx-item"><div class="fx-item-icon" style="background:rgba(251,191,36,0.12);color:#fbbf24"><i class="ph ph-circle-half"></i></div><div><div class="fx-item-name">Emulsion (Negative)</div><div class="fx-item-desc">Luminosity-weighted silver halide crystal grain. Denser in shadows, finer in highlights.</div></div></div>
                <div class="fx-item"><div class="fx-item-icon" style="background:rgba(251,191,36,0.12);color:#fbbf24"><i class="ph ph-scan"></i></div><div><div class="fx-item-name">Analog (35mm Scan)</div><div class="fx-item-desc">Scanner-introduced texture and optical density shifts. Mimics actual drum-scan artifacts.</div></div></div>
              </div>
              <div class="fx-controls">
                <div class="fx-ctrl"><span>Intensity</span><div class="fx-slider"><div class="fx-slider-fill" style="width:72%"></div></div><span>72</span></div>
                <div class="fx-ctrl"><span>Size</span><div class="fx-slider"><div class="fx-slider-fill" style="width:40%"></div></div><span>40</span></div>
                <div class="fx-ctrl"><span>Roughness</span><div class="fx-slider"><div class="fx-slider-fill" style="width:55%"></div></div><span>55</span></div>
              </div>
            </div>
            <div class="fx-panel-right">
              <canvas id="fx-grain-canvas" class="fx-canvas"></canvas>
              <div class="fx-canvas-label">Live grain preview</div>
            </div>
          </div>
        </div>

        <!-- LENS OPTICS -->
        <div class="fx-panel" id="fx-lens">
          <div class="fx-panel-inner">
            <div class="fx-panel-left">
              <div class="fx-panel-badge">Lens Optics</div>
              <h3 class="fx-panel-title">Optical<br>Imperfections</h3>
              <p class="fx-panel-desc">Recreate the physical characteristics of real lenses &mdash; from vintage aberrations to tilt-shift miniatures.</p>
              <div class="fx-items">
                <div class="fx-item"><div class="fx-item-icon" style="background:rgba(248,113,113,0.1);color:#f87171"><i class="ph ph-arrows-out-line-horizontal"></i></div><div><div class="fx-item-name">Lens Fringing</div><div class="fx-item-desc">Purple/green chromatic aberration split at high-contrast edges.</div></div></div>
                <div class="fx-item"><div class="fx-item-icon" style="background:rgba(248,113,113,0.1);color:#f87171"><i class="ph ph-circle-dashed"></i></div><div><div class="fx-item-name">Barrel Distortion</div><div class="fx-item-desc">Wide-angle fisheye lens curvature from &minus;100 to +100.</div></div></div>
                <div class="fx-item"><div class="fx-item-icon" style="background:rgba(237,39,136,0.1);color:var(--hot-pink)"><i class="ph ph-sun-dim"></i></div><div><div class="fx-item-name">Halation</div><div class="fx-item-desc">Red bleed around bright areas &mdash; film back-scatter from the emulsion base.</div></div></div>
                <div class="fx-item"><div class="fx-item-icon" style="background:rgba(248,113,113,0.1);color:#f87171"><i class="ph ph-gradient"></i></div><div><div class="fx-item-name">Tilt-Shift</div><div class="fx-item-desc">Selective top/bottom blur for the miniature diorama effect.</div></div></div>
                <div class="fx-item"><div class="fx-item-icon" style="background:rgba(248,113,113,0.1);color:#f87171"><i class="ph ph-cloud-fog"></i></div><div><div class="fx-item-name">Mist Diffusion</div><div class="fx-item-desc">Pro-Mist filter soft glow bleeding from highlights.</div></div></div>
              </div>
            </div>
            <div class="fx-panel-right">
              <div class="fx-lens-demo">
                <div class="lens-ring lens-ring-1"></div>
                <div class="lens-ring lens-ring-2"></div>
                <div class="lens-ring lens-ring-3"></div>
                <div class="lens-center"><i class="ph ph-eye" style="font-size:2rem;color:rgba(237,39,136,0.6)"></i></div>
                <div class="lens-flare"></div>
              </div>
              <div class="fx-canvas-label">Lens optical model</div>
            </div>
          </div>
        </div>

        <!-- CINEMATIC -->
        <div class="fx-panel" id="fx-cinema">
          <div class="fx-panel-inner">
            <div class="fx-panel-left">
              <div class="fx-panel-badge">Cinematic</div>
              <h3 class="fx-panel-title">Projector<br>Artifacts</h3>
              <p class="fx-panel-desc">Recreate the physical failures of analog film projection and exposure.</p>
              <div class="fx-items">
                <div class="fx-item"><div class="fx-item-icon" style="background:rgba(96,165,250,0.1);color:#60a5fa"><i class="ph ph-film-strip"></i></div><div><div class="fx-item-name">Gate Weave</div><div class="fx-item-desc">Film transport jitter from a vintage projector mechanism.</div></div></div>
                <div class="fx-item"><div class="fx-item-icon" style="background:rgba(251,191,36,0.1);color:#fbbf24"><i class="ph ph-fire"></i></div><div><div class="fx-item-name">Film Burn</div><div class="fx-item-desc">Light leak overlays with entropy seed for unique randomization every frame.</div></div></div>
                <div class="fx-item"><div class="fx-item-icon" style="background:rgba(167,139,250,0.1);color:#a78bfa"><i class="ph ph-thermometer"></i></div><div><div class="fx-item-name">Spectral Vision</div><div class="fx-item-desc">False-color thermal / infrared spectrum modes.</div></div></div>
              </div>
            </div>
            <div class="fx-panel-right">
              <canvas id="fx-cinema-canvas" class="fx-canvas"></canvas>
              <div class="fx-canvas-label">Gate weave + film burn</div>
            </div>
          </div>
        </div>

        <!-- DIGITAL -->
        <div class="fx-panel" id="fx-digital">
          <div class="fx-panel-inner">
            <div class="fx-panel-left">
              <div class="fx-panel-badge">Digital</div>
              <h3 class="fx-panel-title">Signal<br>Processing</h3>
              <p class="fx-panel-desc">Embrace the machine. Glitch, dither, and pixelate with surgical precision.</p>
              <div class="fx-items">
                <div class="fx-item"><div class="fx-item-icon" style="background:rgba(74,222,128,0.1);color:#4ade80"><i class="ph ph-text-aa"></i></div><div><div class="fx-item-name">ASCII</div><div class="fx-item-desc">Convert brightness to text characters. Customizable character set and density.</div></div></div>
                <div class="fx-item"><div class="fx-item-icon" style="background:rgba(74,222,128,0.1);color:#4ade80"><i class="ph ph-grid-four"></i></div><div><div class="fx-item-name">Dithering (Lo-Fi)</div><div class="fx-item-desc">Floyd-Steinberg, Atkinson, and Bayer 4&times;4 algorithms for the zine-print aesthetic.</div></div></div>
                <div class="fx-item"><div class="fx-item-icon" style="background:rgba(74,222,128,0.1);color:#4ade80"><i class="ph ph-paint-bucket"></i></div><div><div class="fx-item-name">Posterize</div><div class="fx-item-desc">Reduce color palette from 2 to 32 levels for screen-print aesthetics.</div></div></div>
                <div class="fx-item"><div class="fx-item-icon" style="background:rgba(74,222,128,0.1);color:#4ade80"><i class="ph ph-sun"></i></div><div><div class="fx-item-name">Bloom</div><div class="fx-item-desc">Glow around highlights with strength, threshold, and custom tint controls.</div></div></div>
              </div>
            </div>
            <div class="fx-panel-right">
              <canvas id="fx-digital-canvas" class="fx-canvas"></canvas>
              <div class="fx-canvas-label">Bayer dither simulation</div>
            </div>
          </div>
        </div>

        <!-- TEXTURE -->
        <div class="fx-panel" id="fx-texture">
          <div class="fx-panel-inner">
            <div class="fx-panel-left">
              <div class="fx-panel-badge">Texture &amp; Frame</div>
              <h3 class="fx-panel-title">Overlays &amp;<br>Borders</h3>
              <p class="fx-panel-desc">15+ built-in texture overlays with blend mode control. Add borders and film-frame overlays.</p>
              <div class="fx-items">
                <div class="fx-item"><div class="fx-item-icon" style="background:rgba(167,139,250,0.1);color:#a78bfa"><i class="ph ph-stack"></i></div><div><div class="fx-item-name">15+ Overlays</div><div class="fx-item-desc">Dust, light leaks, crumpled paper &mdash; via Multiply / Screen / Overlay / Soft Light.</div></div></div>
                <div class="fx-item"><div class="fx-item-icon" style="background:rgba(167,139,250,0.1);color:#a78bfa"><i class="ph ph-frame-corners"></i></div><div><div class="fx-item-name">Borders &amp; Frames</div><div class="fx-item-desc">Film frame overlays with padding, color, and opacity control.</div></div></div>
                <div class="fx-item"><div class="fx-item-icon" style="background:rgba(167,139,250,0.1);color:#a78bfa"><i class="ph ph-cube"></i></div><div><div class="fx-item-name">LUT Import / Export</div><div class="fx-item-desc">Load .cube LUT files. Export your grade as a 33-pt HALD .cube.</div></div></div>
              </div>
            </div>
            <div class="fx-panel-right fx-texture-demo">
              <div class="texture-grid">
                <div class="texture-cell" style="background:repeating-linear-gradient(45deg,rgba(255,255,255,0.04),rgba(255,255,255,0.04) 1px,transparent 1px,transparent 8px)">Multiply</div>
                <div class="texture-cell" style="background:radial-gradient(circle,rgba(237,39,136,0.12),transparent 70%)">Screen</div>
                <div class="texture-cell" style="background:repeating-conic-gradient(rgba(255,255,255,0.05) 0deg 90deg,transparent 90deg 180deg) 0 0/10px 10px">Overlay</div>
                <div class="texture-cell" style="background:linear-gradient(135deg,rgba(60,162,200,0.09),rgba(237,39,136,0.09))">Soft Light</div>
              </div>
              <div class="fx-canvas-label">Blend mode previews</div>
            </div>
          </div>
        </div>
    </section>

        <!-- ── LIVE SCOPES ────────────────────────────────────── -->
    <section id="scopes">
        <div class="scopes-inner">
            <div class="section-label">Analysis Tools</div>
            <h2 class="section-headline">Broadcast-grade<br><span style="color:var(--moonstone)">scopes</span>. Live.
            </h2>
            <p class="section-desc">Histogram, Waveform and Vectorscope update in real-time as you grade — giving you
                the same analysis tools used in professional color suites.</p>
            <div class="scopes-grid">

                <!-- Histogram -->
                <div class="scope-card" data-scope-reveal style="transition-delay:0s">
                    <div class="scope-header">
                        <span class="scope-title">RGB Histogram</span>
                        <span class="scope-live">Live</span>
                    </div>
                    <canvas id="histogram-canvas" class="scope-canvas" height="140"></canvas>
                    <div class="scope-meta">
                        <span class="scope-tag r">Red</span>
                        <span class="scope-tag g">Green</span>
                        <span class="scope-tag b">Blue</span>
                        <span class="scope-tag y">Luma</span>
                    </div>
                </div>

                <!-- Vectorscope -->
                <div class="scope-card" data-scope-reveal style="transition-delay:0.1s">
                    <div class="scope-header">
                        <span class="scope-title">Vectorscope</span>
                        <span class="scope-live">Live</span>
                    </div>
                    <canvas id="vectorscope-canvas" class="scope-canvas" height="220"></canvas>
                    <div class="scope-meta">
                        <span class="scope-tag">Hue &amp; Sat</span>
                        <span class="scope-tag">YIQ Model</span>
                        <span class="scope-tag y">Broadcast Safe</span>
                    </div>
                </div>

                <!-- Waveform -->
                <div class="scope-card" data-scope-reveal style="transition-delay:0.2s">
                    <div class="scope-header">
                        <span class="scope-title">Waveform Monitor</span>
                        <span class="scope-live">Live</span>
                    </div>
                    <canvas id="waveform-canvas" class="scope-canvas" height="140"></canvas>
                    <div class="scope-meta">
                        <span class="scope-tag">Luminance</span>
                        <span class="scope-tag">X-Axis Scan</span>
                        <span class="scope-tag g">Parade</span>
                    </div>
                </div>

            </div>
        </div>
    </section>


    <!-- ── PRESET SHOWCASE (LIVE CANVAS) ──────────────────── -->
    <section id="preset-catalog" style="padding:7rem 0; overflow:hidden;">
        <div style="max-width:1200px; margin:0 auto; padding:0 2rem;">
            <div class="section-label" style="color:var(--hot-pink)">Film Emulation Library</div>
            <h2 class="section-headline">150+ presets.<br><span style="color:var(--hot-pink)">Every one, a story.</span></h2>
            <p class="section-desc">Hand-crafted analog emulations — each with its own grain structure, halation, and color soul. Auto-rotating every 10 seconds.</p>
        </div>

        <div class="ps-wrap">
            <!-- Left: Canvas display -->
            <div class="ps-canvas-side">
                <div class="ps-canvas-frame">
                    <canvas id="ps-canvas-a" class="ps-canvas"></canvas>
                    <canvas id="ps-canvas-b" class="ps-canvas ps-canvas-b"></canvas>
                    <div class="ps-film-badge" id="ps-film-badge">FILM</div>
                    <div class="ps-corner ps-corner-tl"></div>
                    <div class="ps-corner ps-corner-tr"></div>
                    <div class="ps-corner ps-corner-bl"></div>
                    <div class="ps-corner ps-corner-br"></div>
                </div>
            </div>

            <!-- Right: Info panel -->
            <div class="ps-info-side">
                <div class="ps-brand" id="ps-brand">Kodak</div>
                <div class="ps-name" id="ps-name">Portra 400</div>
                <div class="ps-desc" id="ps-desc">Warm, peerless skin tones with wide exposure latitude.</div>
                <div class="ps-tags" id="ps-tags">
                    <span class="ps-tag">Portrait</span>
                    <span class="ps-tag">Wedding</span>
                </div>
                <div class="ps-meta" id="ps-meta">
                    <span class="ps-meta-item"><i class="ph ph-gradient"></i> Warm</span>
                    <span class="ps-meta-item"><i class="ph ph-dots-nine"></i> Fine Grain</span>
                    <span class="ps-meta-item"><i class="ph ph-sun-dim"></i> No Halation</span>
                </div>

                <!-- Progress bar -->
                <div class="ps-progress-wrap">
                    <div class="ps-progress-bar"><div class="ps-progress-fill" id="ps-progress-fill"></div></div>
                    <div class="ps-progress-label">
                        <span id="ps-index">01</span><span style="color:rgba(255,255,255,0.15)">&nbsp;/&nbsp;12</span>
                        <span style="float:right;font-size:0.55rem;letter-spacing:0.1em">NEXT IN <span id="ps-countdown">10</span>s</span>
                    </div>
                </div>

                <!-- Dot nav -->
                <div class="ps-dots" id="ps-dots"></div>

                <!-- Prev / Next -->
                <div class="ps-nav-btns">
                    <button class="ps-nav-btn" id="ps-prev"><i class="ph ph-caret-left"></i></button>
                    <button class="ps-nav-btn" id="ps-next"><i class="ph ph-caret-right"></i></button>
                    <button class="ps-nav-btn ps-play-btn" id="ps-play" title="Pause"><i class="ph ph-pause" id="ps-play-icon"></i></button>
                </div>
            </div>
        </div>
    </section>

    <!-- ── FILM REEL TICKER ────────────────────────────────── -->
    <section id="film-reel">
        <div class="reel-header">
            <div class="reel-subtext">Film Stock Library</div>
            <h2 class="reel-headline">
                <span class="reel-count">150+</span> Analog Emulations
            </h2>
        </div>

        <!-- Row 1: Left scroll -->
        <div class="ticker-wrap">
            <div class="ticker-fade-left"></div>
            <div class="ticker-fade-right"></div>
            <div class="ticker-row ticker-row-1" id="ticker-1"></div>
        </div>

        <!-- Row 2: Right scroll -->
        <div class="ticker-wrap">
            <div class="ticker-fade-left"></div>
            <div class="ticker-fade-right"></div>
            <div class="ticker-row ticker-row-2" id="ticker-2"></div>
        </div>
    </section>

    <!-- ── FINAL CTA ──────────────────────────────────────── -->
    <section style="padding:6rem 2rem; text-align:center; border-top:1px solid var(--border);">
        <div
            style="font-family:var(--font-mono);font-size:0.6rem;letter-spacing:0.3em;text-transform:uppercase;color:var(--hot-pink);margin-bottom:1.5rem;">
            Zero Cloud · Zero Accounts · 100% Offline</div>
        <h2 style="font-size:clamp(2rem,5vw,3.5rem);font-weight:900;letter-spacing:-0.03em;margin-bottom:1rem;">Your
            photos.<br><span style="color:var(--hot-pink)">Your device.</span> Always.</h2>
        <p style="color:var(--muted);font-size:1rem;max-width:480px;margin:0 auto 2.5rem;line-height:1.7;">No image ever
            leaves your RAM. No login. No subscription. Just a browser, a WebGL pipeline, and 150+ analog emulsions.</p>
        <a href="https://untitled-40w.pages.dev/" class="btn-primary" style="margin:0 auto;">
            <i class="ph ph-camera"></i> Open the Studio — Free
        </a>
    </section>

    <!-- ── FOOTER ──────────────────────────────────────────── -->
    <footer>
        <a href="landing.html" class="footer-logo">
            &gt;_ UNTITLED <span>STUDIO</span>
        </a>
        <ul class="footer-links">
            <li><a href="https://untitled-40w.pages.dev/">Editor</a></li>
            <li><a href="how-to.html">Docs</a></li>
            <li><a href="#fx-showcase">FX &amp; Optics</a></li>
            <li><a href="preset_catalog.html">Presets</a></li>
        </ul>
        <span class="footer-copy">© 2026 MHS. All rights reserved.</span>
    </footer>

    <!-- ── SCRIPTS ─────────────────────────────────────────── -->
    <script>
        /* ── TYPEWRITER ──────────────────────────────────────── */
        const filmNames = [
            'Kodak Portra 400', 'Kodak Tri-X 400', 'Fuji Velvia 50',
            'Ilford HP5 Plus', 'Cinestill 800T', 'Kodak Ektar 100',
            'Fuji Pro 400H', 'Svema 200', 'Kodak Aerochrome IR',
            'Fuji Superia 1600', 'Ilford Delta 3200', 'Orwo NP15',
            'Kodak Gold 200', 'Fuji Classic Chrome', 'Film Washi W',
            'Revolog Tesla', 'Kono! Donau', 'Fomapan 400',
            'Fuji Neopan Acros', 'CineStill 50D',
        ];

        let twIdx = 0, twChar = 0, twDeleting = false;
        const twEl = document.getElementById('tw-text');

        function typeStep() {
            const target = filmNames[twIdx];
            if (!twDeleting) {
                twChar++;
                twEl.textContent = target.slice(0, twChar);
                if (twChar === target.length) {
                    setTimeout(() => { twDeleting = true; typeStep(); }, 1800);
                    return;
                }
            } else {
                twChar--;
                twEl.textContent = target.slice(0, twChar);
                if (twChar === 0) {
                    twDeleting = false;
                    twIdx = (twIdx + 1) % filmNames.length;
                }
            }
            setTimeout(typeStep, twDeleting ? 30 : 60);
        }
        typeStep();

        /* ── FILM TICKER ─────────────────────────────────────── */
        const allFilms = [
            { name: 'Kodak Portra 160', cls: 'chip-dot-kodak' },
            { name: 'Kodak Portra 400', cls: 'chip-dot-kodak' },
            { name: 'Kodak Portra 800', cls: 'chip-dot-kodak' },
            { name: 'Kodak Gold 200', cls: 'chip-dot-kodak' },
            { name: 'Kodak Ektar 100', cls: 'chip-dot-kodak' },
            { name: 'Kodak Tri-X 400', cls: 'chip-dot-kodak' },
            { name: 'Kodak T-Max 100', cls: 'chip-dot-kodak' },
            { name: 'Kodak T-Max 400', cls: 'chip-dot-kodak' },
            { name: 'Kodak HIE Infrared', cls: 'chip-dot-retro' },
            { name: 'Kodak Aerochrome IR', cls: 'chip-dot-retro' },
            { name: 'Kodak Vision3 500T', cls: 'chip-dot-cinema' },
            { name: 'Fuji Pro 400H', cls: 'chip-dot-fuji' },
            { name: 'Fuji Superia 400', cls: 'chip-dot-fuji' },
            { name: 'Fuji Superia 1600', cls: 'chip-dot-fuji' },
            { name: 'Fuji Velvia 50', cls: 'chip-dot-fuji' },
            { name: 'Fuji Velvia 100F', cls: 'chip-dot-fuji' },
            { name: 'Fuji Provia 100F', cls: 'chip-dot-fuji' },
            { name: 'Fuji Classic Chrome', cls: 'chip-dot-fuji' },
            { name: 'Fuji Neopan Acros', cls: 'chip-dot-fuji' },
            { name: 'Fuji Eterna 500T', cls: 'chip-dot-cinema' },
            { name: 'Ilford HP5 Plus', cls: 'chip-dot-ilford' },
            { name: 'Ilford FP4', cls: 'chip-dot-ilford' },
            { name: 'Ilford Delta 3200', cls: 'chip-dot-ilford' },
            { name: 'Ilford Ortho Plus', cls: 'chip-dot-ilford' },
            { name: 'Ilford SFX 200', cls: 'chip-dot-ilford' },
            { name: 'CineStill 800T', cls: 'chip-dot-cinema' },
            { name: 'CineStill 50D', cls: 'chip-dot-cinema' },
            { name: 'Svema 200', cls: 'chip-dot-eastern' },
            { name: 'Orwo NP15', cls: 'chip-dot-eastern' },
            { name: 'Tasma 500', cls: 'chip-dot-eastern' },
            { name: 'Fomapan 400', cls: 'chip-dot-eastern' },
            { name: 'Lucky 200', cls: 'chip-dot-eastern' },
            { name: 'Film Washi W', cls: 'chip-dot-boutiq' },
            { name: 'Kono! Donau', cls: 'chip-dot-boutiq' },
            { name: 'Revolog Tesla', cls: 'chip-dot-boutiq' },
            { name: 'Dubblefilm Show', cls: 'chip-dot-boutiq' },
            { name: 'Reflx Lab 400D', cls: 'chip-dot-boutiq' },
            { name: 'Agfa Vista 200', cls: 'chip-dot-retro' },
            { name: 'Polaroid 600', cls: 'chip-dot-retro' },
            { name: 'Rollei RPX 400', cls: 'chip-dot-retro' },
        ];

        function buildTicker(containerId, films) {
            const el = document.getElementById(containerId);
            // Duplicate for seamless loop
            const doubled = [...films, ...films];
            doubled.forEach(f => {
                const chip = document.createElement('div');
                chip.className = 'film-chip';
                chip.innerHTML = `<span class="chip-dot ${f.cls}"></span>${f.name}`;
                el.appendChild(chip);
            });
        }

        // Row 1: first half of films
        buildTicker('ticker-1', allFilms);
        // Row 2: second half (shifted)
        buildTicker('ticker-2', [...allFilms.slice(20), ...allFilms.slice(0, 20)]);

        /* ── SCROLL REVEAL ───────────────────────────────────── */
        const revealObserver = new IntersectionObserver((entries) => {
            entries.forEach(e => {
                if (e.isIntersecting) {
                    e.target.classList.add('reveal');
                    revealObserver.unobserve(e.target);
                }
            });
        }, { threshold: 0.15 });

        document.querySelectorAll('.feature-card[data-reveal], .stat-item').forEach(el => {
            revealObserver.observe(el);
        });

        /* ── FX TABS ────────────────────────────────────── */
        document.getElementById('fx-tabs-nav').addEventListener('click', e => {
            const btn = e.target.closest('.fx-tab-btn');
            if (!btn) return;
            document.querySelectorAll('.fx-tab-btn').forEach(b => b.classList.remove('active'));
            document.querySelectorAll('.fx-panel').forEach(p => p.classList.remove('active'));
            btn.classList.add('active');
            document.getElementById('fx-' + btn.dataset.tab).classList.add('active');
        });

        /* Grain canvas */
        (function () {
            const cv = document.getElementById('fx-grain-canvas');
            if (!cv) return;
            const ctx = cv.getContext('2d');
            function resize() { cv.width = cv.parentElement.clientWidth || 400; cv.height = Math.round(cv.width * 0.6); }
            resize(); window.addEventListener('resize', resize);
            let t = 0;
            function draw() {
                const w = cv.width, h = cv.height;
                const img = ctx.createImageData(w, h);
                const intensity = 0.65 + 0.15 * Math.sin(t * 0.4);
                for (let i = 0; i < w * h; i++) {
                    const x = i % w, y = Math.floor(i / w);
                    const luma = 0.3 + 0.4 * Math.exp(-Math.pow((x / w - 0.5), 2) / 0.08 - Math.pow((y / h - 0.5), 2) / 0.12);
                    const g = (Math.random() * 2 - 1) * intensity * 255;
                    const base = luma * 200;
                    img.data[i * 4] = Math.min(255, Math.max(0, base + g * 0.9));
                    img.data[i * 4 + 1] = Math.min(255, Math.max(0, base + g * 0.85 - 8));
                    img.data[i * 4 + 2] = Math.min(255, Math.max(0, base + g * 0.75 - 15));
                    img.data[i * 4 + 3] = 255;
                }
                ctx.putImageData(img, 0, 0);
                t += 0.04;
                requestAnimationFrame(draw);
            }
            draw();
        })();

        /* Cinema canvas (gate weave + film burn) */
        (function () {
            const cv = document.getElementById('fx-cinema-canvas');
            if (!cv) return;
            const ctx = cv.getContext('2d');
            function resize() { cv.width = cv.parentElement.clientWidth || 400; cv.height = Math.round(cv.width * 0.6); }
            resize(); window.addEventListener('resize', resize);
            let t = 0;
            function draw() {
                const w = cv.width, h = cv.height;
                ctx.clearRect(0, 0, w, h);
                ctx.fillStyle = '#0a0a08';
                ctx.fillRect(0, 0, w, h);
                // gate weave jitter
                const jX = Math.sin(t * 3.1) * 3 + Math.sin(t * 7.3) * 1.5;
                const jY = Math.cos(t * 4.7) * 2;
                ctx.save();
                ctx.translate(jX, jY);
                // film frame lines
                ctx.strokeStyle = 'rgba(255,255,200,0.06)';
                ctx.lineWidth = 1;
                [h * 0.08, h * 0.92].forEach(y => { ctx.beginPath(); ctx.moveTo(0, y); ctx.lineTo(w, y); ctx.stroke(); });
                // sprocket holes left
                for (let i = 0; i < 5; i++) {
                    const y = h * 0.15 + i * h * 0.16;
                    ctx.fillStyle = 'rgba(0,0,0,0.5)';
                    ctx.beginPath(); ctx.rect(6, y, 14, 9); ctx.fill();
                    ctx.strokeStyle = 'rgba(255,255,255,0.08)';
                    ctx.stroke();
                }
                // film burn light leak
                const burnX = w * (0.5 + 0.4 * Math.sin(t * 0.3));
                const burnY = h * 0.15;
                const burnR = w * (0.15 + 0.1 * Math.abs(Math.sin(t * 0.5)));
                const grad = ctx.createRadialGradient(burnX, burnY, 0, burnX, burnY, burnR);
                grad.addColorStop(0, `rgba(255,220,120,${0.6 + 0.3 * Math.abs(Math.sin(t))})`);
                grad.addColorStop(0.4, `rgba(237,100,39,${0.2 + 0.1 * Math.abs(Math.sin(t))})`);
                grad.addColorStop(1, 'rgba(0,0,0,0)');
                ctx.fillStyle = grad;
                ctx.fillRect(0, 0, w, h);
                // scanlines
                for (let y = 0; y < h; y += 3) {
                    ctx.fillStyle = 'rgba(0,0,0,0.1)';
                    ctx.fillRect(0, y, w, 1);
                }
                ctx.restore();
                t += 0.035;
                requestAnimationFrame(draw);
            }
            draw();
        })();

        /* Digital canvas (dither / bayer grid) */
        (function () {
            const cv = document.getElementById('fx-digital-canvas');
            if (!cv) return;
            const ctx = cv.getContext('2d');
            function resize() { cv.width = cv.parentElement.clientWidth || 400; cv.height = Math.round(cv.width * 0.6); }
            resize(); window.addEventListener('resize', resize);
            let t = 0;
            const BAYER = [[0, 8, 2, 10], [12, 4, 14, 6], [3, 11, 1, 9], [15, 7, 13, 5]];
            function draw() {
                const w = cv.width, h = cv.height;
                const img = ctx.createImageData(w, h);
                const pal = [
                    [8, 8, 8], [237, 39, 136], [60, 162, 200], [255, 255, 255],
                    [20, 20, 20], [180, 30, 100], [30, 130, 160], [200, 200, 200]
                ];
                const pidx = Math.floor(t * 0.3) % 2;
                for (let y = 0; y < h; y++) {
                    for (let x = 0; x < w; x++) {
                        const xn = x / w, yn = y / h;
                        // gradient source
                        const src = 0.3 + 0.6 * (Math.sin(xn * 6 + t) * 0.5 + 0.5) * (Math.cos(yn * 4 - t * 0.7) * 0.5 + 0.5);
                        const thresh = BAYER[y % 4][x % 4] / 16;
                        const level = src > thresh ? 1 : 0;
                        const c = level === 1 ? pal[2 + pidx * 4] : pal[0 + pidx * 4];
                        const i = (y * w + x) * 4;
                        img.data[i] = c[0]; img.data[i + 1] = c[1]; img.data[i + 2] = c[2]; img.data[i + 3] = 255;
                    }
                }
                ctx.putImageData(img, 0, 0);
                t += 0.04;
                requestAnimationFrame(draw);
            }
            draw();
        })();

        /* ── COUNT-UP ────────────────────────────────────────── */
        const countObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (!entry.isIntersecting) return;
                entry.target.querySelectorAll('[data-target]').forEach(span => {
                    const end = +span.dataset.target;
                    const suffix = span.dataset.suffix || '';
                    if (end === 0) { span.textContent = '0' + suffix; return; }
                    let current = 0;
                    const step = Math.max(1, Math.ceil(end / 60));
                    const interval = setInterval(() => {
                        current = Math.min(current + step, end);
                        span.textContent = current + suffix;
                        if (current >= end) clearInterval(interval);
                    }, 16);
                });
                countObserver.unobserve(entry.target);
            });
        }, { threshold: 0.4 });
        countObserver.observe(document.getElementById('stats-grid'));

        /* ── 3D CARD TILT ────────────────────────────────────── */
        document.querySelectorAll('.feature-card').forEach(card => {
            card.addEventListener('mousemove', e => {
                const r = card.getBoundingClientRect();
                const x = (e.clientX - r.left) / r.width;
                const y = (e.clientY - r.top) / r.height;
                const tiltX = (y - 0.5) * 10;
                const tiltY = (x - 0.5) * -10;
                card.style.transform = `perspective(800px) rotateX(${tiltX}deg) rotateY(${tiltY}deg) translateY(0)`;
                card.style.setProperty('--mx', `${x * 100}%`);
                card.style.setProperty('--my', `${y * 100}%`);
            });
            card.addEventListener('mouseleave', () => {
                card.style.transform = '';
            });
        });

        /* ── PARTICLE SYSTEM (HERO) ──────────────────────── */
        const heroEl = document.getElementById('hero');
        const pCanvas = document.createElement('canvas');
        pCanvas.id = 'particles-canvas';
        heroEl.insertBefore(pCanvas, heroEl.firstChild);
        const pCtx = pCanvas.getContext('2d');
        let particles = [];
        function resizeP() { pCanvas.width = heroEl.offsetWidth; pCanvas.height = heroEl.offsetHeight; }
        resizeP(); window.addEventListener('resize', resizeP);
        function mkParticle() {
            return {
                x: Math.random() * pCanvas.width,
                y: Math.random() * pCanvas.height,
                r: Math.random() * 1.5 + 0.3,
                vx: (Math.random() - 0.5) * 0.3,
                vy: (Math.random() - 0.5) * 0.3,
                alpha: Math.random() * 0.5 + 0.1,
                pink: Math.random() > 0.6
            };
        }
        for (let i = 0; i < 90; i++) particles.push(mkParticle());
        function animParticles() {
            pCtx.clearRect(0, 0, pCanvas.width, pCanvas.height);
            particles.forEach(p => {
                p.x += p.vx; p.y += p.vy;
                if (p.x < 0) p.x = pCanvas.width;
                if (p.x > pCanvas.width) p.x = 0;
                if (p.y < 0) p.y = pCanvas.height;
                if (p.y > pCanvas.height) p.y = 0;
                pCtx.beginPath();
                pCtx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
                pCtx.fillStyle = p.pink
                    ? `rgba(237,39,136,${p.alpha})`
                    : `rgba(60,162,200,${p.alpha})`;
                pCtx.fill();
            });
            requestAnimationFrame(animParticles);
        }
        animParticles();

        /* ── SCOPE OBSERVER ──────────────────────────────── */
        const scopeObserver = new IntersectionObserver(entries => {
            entries.forEach(e => {
                if (e.isIntersecting) {
                    e.target.classList.add('reveal');
                    scopeObserver.unobserve(e.target);
                }
            });
        }, { threshold: 0.1 });
        document.querySelectorAll('[data-scope-reveal]').forEach(el => scopeObserver.observe(el));

        /* ── HISTOGRAM ───────────────────────────────────── */
        (function () {
            const cv = document.getElementById('histogram-canvas');
            const ctx = cv.getContext('2d');
            let t = 0;
            function resizeH() { cv.width = cv.parentElement.clientWidth || 400; }
            resizeH(); window.addEventListener('resize', resizeH);
            // Seed smooth base data per channel
            const W = 256;
            const bases = Array.from({ length: W }, (_, i) => {
                const x = i / W;
                // bell-ish curves at different peaks per channel
                const r = Math.exp(-Math.pow(x - 0.62, 2) / 0.04) * 0.8 + Math.exp(-Math.pow(x - 0.15, 2) / 0.01) * 0.15;
                const g = Math.exp(-Math.pow(x - 0.52, 2) / 0.06) * 0.75 + Math.exp(-Math.pow(x - 0.82, 2) / 0.02) * 0.1;
                const b = Math.exp(-Math.pow(x - 0.38, 2) / 0.05) * 0.7 + Math.exp(-Math.pow(x - 0.72, 2) / 0.03) * 0.2;
                return { r, g, b };
            });
            function drawHistogram() {
                const w = cv.width, h = cv.height;
                ctx.clearRect(0, 0, w, h);
                ctx.fillStyle = '#000';
                ctx.fillRect(0, 0, w, h);
                // grid lines
                ctx.strokeStyle = 'rgba(255,255,255,0.05)';
                ctx.lineWidth = 1;
                for (let g = 0; g <= 4; g++) {
                    const gy = h - (g / 4) * h;
                    ctx.beginPath(); ctx.moveTo(0, gy); ctx.lineTo(w, gy); ctx.stroke();
                }
                const channels = [
                    { key: 'r', color: 'rgba(248,113,113,0.55)', lshift: 0.08 },
                    { key: 'g', color: 'rgba(74,222,128,0.45)', lshift: -0.04 },
                    { key: 'b', color: 'rgba(96,165,250,0.5)', lshift: 0.02 },
                ];
                channels.forEach(ch => {
                    ctx.beginPath();
                    ctx.moveTo(0, h);
                    for (let i = 0; i < W; i++) {
                        const anim = 1 + 0.12 * Math.sin(t * 0.7 + i * 0.08 + ch.lshift * 30);
                        const val = Math.min(1, bases[i][ch.key] * anim);
                        const px = (i / (W - 1)) * w;
                        const py = h - val * (h - 4);
                        i === 0 ? ctx.moveTo(px, py) : ctx.lineTo(px, py);
                    }
                    ctx.lineTo(w, h);
                    ctx.fillStyle = ch.color;
                    ctx.fill();
                });
                t += 0.025;
                requestAnimationFrame(drawHistogram);
            }
            drawHistogram();
        })();

        /* ── VECTORSCOPE ─────────────────────────────────── */
        (function () {
            const cv = document.getElementById('vectorscope-canvas');
            const ctx = cv.getContext('2d');
            let t = 0;
            function resizeV() {
                const s = cv.parentElement.clientWidth || 300;
                cv.width = s; cv.height = s;
            }
            resizeV(); window.addEventListener('resize', resizeV);
            // clouds of dots at hue positions (0–6 for RYGCBM)
            const COLORS = [
                { angle: 0, label: 'R', col: [248, 113, 113] },
                { angle: 60, label: 'Y', col: [251, 191, 36] },
                { angle: 120, label: 'G', col: [74, 222, 128] },
                { angle: 180, label: 'C', col: [34, 211, 238] },
                { angle: 240, label: 'B', col: [96, 165, 250] },
                { angle: 300, label: 'M', col: [237, 39, 136] },
            ];
            // Pre-generate dot cloud for each color sector
            const clouds = COLORS.map(c => ({
                ...c,
                dots: Array.from({ length: 40 }, () => ({
                    dr: (Math.random() - 0.5) * 0.06,
                    da: (Math.random() - 0.5) * 18,
                    speed: (Math.random() - 0.5) * 0.002,
                    phase: Math.random() * Math.PI * 2
                }))
            }));
            // One main active cluster that drifts (simulates real footage changing)
            let activeCluster = 0, clusterTimer = 0;
            function drawVectorscope() {
                const w = cv.width, h = cv.height;
                const cx = w / 2, cy = h / 2;
                const maxR = Math.min(w, h) * 0.42;
                ctx.clearRect(0, 0, w, h);
                ctx.fillStyle = '#000';
                ctx.fillRect(0, 0, w, h);
                // Outer safe ring
                ctx.beginPath();
                ctx.arc(cx, cy, maxR, 0, Math.PI * 2);
                ctx.strokeStyle = 'rgba(255,255,255,0.06)';
                ctx.lineWidth = 1; ctx.stroke();
                // Inner rings
                [0.33, 0.66].forEach(f => {
                    ctx.beginPath();
                    ctx.arc(cx, cy, maxR * f, 0, Math.PI * 2);
                    ctx.strokeStyle = 'rgba(255,255,255,0.04)';
                    ctx.stroke();
                });
                // Hair-cross
                ctx.strokeStyle = 'rgba(255,255,255,0.06)';
                ctx.beginPath(); ctx.moveTo(cx, cy - maxR); ctx.lineTo(cx, cy + maxR); ctx.stroke();
                ctx.beginPath(); ctx.moveTo(cx - maxR, cy); ctx.lineTo(cx + maxR, cy); ctx.stroke();
                // Color targets
                COLORS.forEach(c => {
                    const rad = (c.angle - 90) * Math.PI / 180;
                    const tx = cx + Math.cos(rad) * maxR * 0.75;
                    const ty = cy + Math.sin(rad) * maxR * 0.75;
                    ctx.beginPath();
                    ctx.arc(tx, ty, 4, 0, Math.PI * 2);
                    ctx.fillStyle = `rgba(${c.col[0]},${c.col[1]},${c.col[2]},0.25)`;
                    ctx.fill();
                    ctx.strokeStyle = `rgba(${c.col[0]},${c.col[1]},${c.col[2]},0.4)`;
                    ctx.lineWidth = 1; ctx.stroke();
                    ctx.fillStyle = `rgba(${c.col[0]},${c.col[1]},${c.col[2]},0.5)`;
                    ctx.font = '8px JetBrains Mono, monospace';
                    ctx.fillText(c.label, tx + 6, ty - 4);
                });
                // Draw dot clouds
                clouds.forEach((cloud, ci) => {
                    const isActive = ci === activeCluster;
                    const baseRad = (cloud.angle - 90) * Math.PI / 180;
                    const baseDist = maxR * (isActive ? 0.55 : 0.35);
                    cloud.dots.forEach(d => {
                        const angle = baseRad + (d.da + Math.sin(t + d.phase) * 5) * Math.PI / 180;
                        const dist = baseDist + d.dr * maxR + Math.sin(t * 1.3 + d.phase) * maxR * 0.04;
                        const px = cx + Math.cos(angle) * dist;
                        const py = cy + Math.sin(angle) * dist;
                        const alpha = isActive ? 0.6 : 0.2;
                        ctx.beginPath();
                        ctx.arc(px, py, isActive ? 1.8 : 1.2, 0, Math.PI * 2);
                        ctx.fillStyle = `rgba(${cloud.col[0]},${cloud.col[1]},${cloud.col[2]},${alpha})`;
                        ctx.fill();
                    });
                });
                clusterTimer += 0.016;
                if (clusterTimer > 4) { clusterTimer = 0; activeCluster = (activeCluster + 1) % COLORS.length; }
                t += 0.016;
                requestAnimationFrame(drawVectorscope);
            }
            drawVectorscope();
        })();

        /* ── WAVEFORM ────────────────────────────────────── */
        (function () {
            const cv = document.getElementById('waveform-canvas');
            const ctx = cv.getContext('2d');
            let t = 0;
            function resizeW() { cv.width = cv.parentElement.clientWidth || 400; }
            resizeW(); window.addEventListener('resize', resizeW);
            // Simulate luminance scan: bright subject in center, darker edges
            function luma(x, t) {
                const xn = x / cv.width;
                const base = 0.55 + 0.3 * Math.exp(-Math.pow(xn - 0.45, 2) / 0.08)
                    + 0.15 * Math.exp(-Math.pow(xn - 0.75, 2) / 0.02);
                const wave = 0.05 * Math.sin(t * 0.8 + xn * 10) + 0.03 * Math.sin(t * 1.4 + xn * 24);
                return Math.min(1, Math.max(0.02, base + wave));
            }
            function drawWaveform() {
                const w = cv.width, h = cv.height;
                ctx.clearRect(0, 0, w, h);
                ctx.fillStyle = '#000';
                ctx.fillRect(0, 0, w, h);
                // Grid
                ctx.strokeStyle = 'rgba(255,255,255,0.05)';
                ctx.lineWidth = 1;
                [0.25, 0.5, 0.75].forEach(f => {
                    const gy = h * (1 - f);
                    ctx.beginPath(); ctx.moveTo(0, gy); ctx.lineTo(w, gy); ctx.stroke();
                    ctx.fillStyle = 'rgba(255,255,255,0.15)';
                    ctx.font = '8px JetBrains Mono, monospace';
                    ctx.fillText(Math.round(f * 100), 4, gy - 3);
                });
                // Draw luminance scatter columns
                for (let x = 0; x < w; x += 2) {
                    const lv = luma(x, t);
                    const noiseH = 12;
                    for (let n = 0; n < noiseH; n++) {
                        const nv = lv + (Math.random() - 0.5) * 0.08;
                        const py = h - Math.min(1, Math.max(0, nv)) * (h - 6);
                        ctx.beginPath();
                        ctx.arc(x, py, 0.8, 0, Math.PI * 2);
                        ctx.fillStyle = `rgba(74,222,128,${0.25 + lv * 0.4})`;
                        ctx.fill();
                    }
                }
                // Bright trace line
                ctx.beginPath();
                ctx.strokeStyle = 'rgba(74,222,128,0.7)';
                ctx.lineWidth = 1.5;
                for (let x = 0; x < w; x++) {
                    const lv = luma(x, t);
                    const py = h - lv * (h - 6);
                    x === 0 ? ctx.moveTo(x, py) : ctx.lineTo(x, py);
                }
                ctx.stroke();
                t += 0.022;
                requestAnimationFrame(drawWaveform);
            }
            drawWaveform();
        })();


        /* ── PRESET SHOWCASE PLAYER ──────────────────────────────── */
        (function () {
            const W = 800, H = 600;
            const cvA = document.getElementById('ps-canvas-a');
            const cvB = document.getElementById('ps-canvas-b');
            if (!cvA || !cvB) return;
            cvA.width = W; cvA.height = H;
            cvB.width = W; cvB.height = H;
            const ctxA = cvA.getContext('2d');
            const ctxB = cvB.getContext('2d');

            // ── PRESETS ──────────────────────────────────────────────
            const PRESETS = [
                {
                    brand: 'Kodak', name: 'Portra 400',
                    desc: 'Warm, peerless skin tones with wide exposure latitude. The gold standard of portrait film.',
                    tags: ['Portrait', 'Wedding'], meta: ['Warm', 'Fine Grain', 'No Halation'],
                    fn: (r, g, b) => [Math.min(255, r * 1.05 + 12), Math.min(255, g * 0.97 + 4), Math.min(255, b * 0.88)],
                    grain: 18, vignette: 0.25, halation: null, tint: [1.05, 0.97, 0.88]
                },
                {
                    brand: 'Fuji', name: 'Velvia 50',
                    desc: 'Neon-fever saturation with crushed blacks. Nature at its most vivid.',
                    tags: ['Landscape', 'Nature'], meta: ['Ultra Vivid', 'Crushed Blacks', 'Fine Grain'],
                    fn: (r, g, b) => [Math.min(255, r * 1.18), Math.min(255, g * 1.12), Math.min(255, b * 1.22)],
                    grain: 8, vignette: 0.3, halation: null
                },
                {
                    brand: 'CineStill', name: '800T',
                    desc: 'Cool tungsten balance with intense red halation around highlights. Neon-lit nightscapes.',
                    tags: ['Night City', 'Neon'], meta: ['Cool', 'Red Halation', 'High Speed'],
                    fn: (r, g, b) => [Math.min(255, r * 0.92 + 6), Math.min(255, g * 0.91), Math.min(255, b * 1.18 + 10)],
                    grain: 28, vignette: 0.45, halation: [255, 40, 40]
                },
                {
                    brand: 'Kodak', name: 'Aerochrome III',
                    desc: 'False-color infrared. Foliage turns vivid magenta, skies deep cyan.',
                    tags: ['Infrared', 'False Color'], meta: ['False Color', 'Psychedelic', 'Military IR'],
                    fn: (r, g, b) => {
                        // IR: swap green→red channel, red→NIR (approx)
                        const ir = g * 0.6 + r * 0.4;
                        return [Math.min(255, ir * 1.4), Math.min(255, r * 0.7), Math.min(255, b * 0.5)];
                    },
                    grain: 20, vignette: 0.3, halation: null
                },
                {
                    brand: 'Ilford', name: 'HP5 Plus 400',
                    desc: 'The industry standard. Forgiving grain, wide latitude, pushable 4 stops.',
                    tags: ['Documentary', 'Street'], meta: ['B&W', 'Mid Grain', 'High Contrast'],
                    fn: (r, g, b) => {
                        const luma = Math.min(255, r * 0.3 + g * 0.59 + b * 0.11);
                        const c = Math.min(255, ((luma / 255) ** 0.9) * 255 + 5);
                        return [c, c, c];
                    },
                    grain: 22, vignette: 0.3, halation: null
                },
                {
                    brand: 'Ilford', name: 'Delta 3200',
                    desc: 'Massive "golf ball" grain, ultra-high speed, raw and powerful.',
                    tags: ['Concert', 'Low Light'], meta: ['B&W', 'Heavy Grain', 'Low Contrast'],
                    fn: (r, g, b) => {
                        const luma = r * 0.3 + g * 0.59 + b * 0.11;
                        const c = Math.min(255, Math.max(0, luma * 0.85 + 20));
                        return [c, c, c];
                    },
                    grain: 55, vignette: 0.2, halation: null
                },
                {
                    brand: 'Fuji', name: 'Pro 400H',
                    desc: 'Pastel tones, airy greens and magenta shadow bias. Wedding photographers\'s choice.',
                    tags: ['Wedding', 'Lifestyle'], meta: ['Pastel', 'Airy Greens', 'Soft'],
                    fn: (r, g, b) => [Math.min(255, r * 0.95 + 18), Math.min(255, g * 1.02 + 12), Math.min(255, b * 0.97 + 10)],
                    grain: 12, vignette: 0.18, halation: null
                },
                {
                    brand: 'LomoChrome', name: 'Purple',
                    desc: 'Greens turn purple, yellows turn pink. Psychedelic nature.',
                    tags: ['False Color', 'Psychedelic'], meta: ['False Color', 'Purple Foliage', 'Vivid'],
                    fn: (r, g, b) => [Math.min(255, r * 1.1 + b * 0.3), Math.min(255, g * 0.45), Math.min(255, b * 1.2 + g * 0.5)],
                    grain: 20, vignette: 0.28, halation: null
                },
                {
                    brand: 'Kodak', name: 'Gold 200',
                    desc: 'Warm, yellow-biased. The quintessential vacation roll sold in every drugstore.',
                    tags: ['Nostalgia', 'Snapshot'], meta: ['Warm Gold', 'Visible Grain', 'Consumer'],
                    fn: (r, g, b) => [Math.min(255, r * 1.08 + 8), Math.min(255, g * 1.02 + 4), Math.min(255, b * 0.82)],
                    grain: 30, vignette: 0.32, halation: null
                },
                {
                    brand: 'Cinema', name: 'Blade Runner',
                    desc: 'Cool shadows, electric neon highlights, heavy halation. Ridley Scott nights.',
                    tags: ['Sci-Fi', 'Night'], meta: ['Teal Shadows', 'Neon Halation', 'High Contrast'],
                    fn: (r, g, b) => {
                        const luma = (r + g + b) / 3;
                        const t = Math.pow(luma / 255, 1.2);
                        return [
                            Math.min(255, r * (0.7 + t * 0.5) + 8),
                            Math.min(255, g * (0.75 + t * 0.35)),
                            Math.min(255, b * (0.9 + t * 0.4) + 18)
                        ];
                    },
                    grain: 25, vignette: 0.5, halation: [0, 200, 255]
                },
                {
                    brand: 'Cinema', name: 'Wes Anderson',
                    desc: 'Warm yellow/red biases, lifted shadows, flat soft contrast. Storybook pastels.',
                    tags: ['Pastel', 'Quirky'], meta: ['Warm Yellow', 'Lifted Blacks', 'Soft Contrast'],
                    fn: (r, g, b) => [Math.min(255, r * 1.06 + 22), Math.min(255, g * 0.97 + 16), Math.min(255, b * 0.78 + 18)],
                    grain: 10, vignette: 0.15, halation: null
                },
                {
                    brand: 'Kodak', name: 'Kodachrome 64',
                    desc: 'Deep, rich reds and yellows with unmatched archival stability. Steve McCurry\'s film.',
                    tags: ['Documentary', 'Timeless'], meta: ['Rich Reds', 'Warm', 'Archival Slide'],
                    fn: (r, g, b) => [Math.min(255, r * 1.2 + 5), Math.min(255, g * 0.92 + 2), Math.min(255, b * 0.82)],
                    grain: 12, vignette: 0.22, halation: null
                },
            ];

            // ── SCENE RENDERER ──────────────────────────────────────
            function renderScene(ctx, preset, seed) {
                const W = ctx.canvas.width, H = ctx.canvas.height;

                // Draw base scene into offscreen ImageData
                const raw = ctx.createImageData(W, H);
                const d = raw.data;

                // Simple procedural scene: sky → horizon → ground → subject
                for (let y = 0; y < H; y++) {
                    for (let x = 0; x < W; x++) {
                        const yn = y / H, xn = x / W;
                        let r, g, b;

                        if (yn < 0.55) {
                            // Sky: deep blue gradient
                            const t = yn / 0.55;
                            r = Math.round(20 + t * 80);
                            g = Math.round(40 + t * 100);
                            b = Math.round(120 + t * 80);
                        } else if (yn < 0.6) {
                            // Horizon glow
                            const t = (yn - 0.55) / 0.05;
                            r = Math.round(100 + t * 80);
                            g = Math.round(140 + t * 40);
                            b = Math.round(200 - t * 60);
                        } else {
                            // Ground: warm earthy
                            const t = (yn - 0.6) / 0.4;
                            r = Math.round(180 - t * 60);
                            g = Math.round(140 - t * 50);
                            b = Math.round(80 - t * 30);
                        }

                        // Mountain silhouette
                        const mh = 0.52 + 0.08 * (0.5 + 0.5 * Math.sin(xn * 5.3 + 1.2)) + 0.05 * Math.sin(xn * 11.7 + 0.4);
                        if (yn > mh && yn < 0.6) {
                            // Mountain: dark rock
                            const blend = Math.min(1, (yn - mh) / 0.04);
                            r = Math.round(r * (1 - blend) + 30 * blend);
                            g = Math.round(g * (1 - blend) + 35 * blend);
                            b = Math.round(b * (1 - blend) + 45 * blend);
                        }

                        // Subject silhouette (center, foreground person shape)
                        const cx = W * 0.5, subW = W * 0.08;
                        const headY = H * 0.62, bodyH = H * 0.2;
                        const inBody = x > cx - subW * 0.5 && x < cx + subW * 0.5 && y > headY && y < headY + bodyH;
                        const headR = subW * 0.45;
                        const inHead = Math.hypot(x - cx, y - (headY - headR * 0.8)) < headR;
                        if (inBody || inHead) {
                            r = 18; g = 16; b = 20;
                        }

                        // Apply preset transform
                        const [pr, pg, pb] = preset.fn(r, g, b);

                        // Grain
                        const gAmt = (Math.random() * 2 - 1) * preset.grain;

                        // Vignette
                        const dx = xn - 0.5, dy = yn - 0.5;
                        const vigDist = Math.sqrt(dx * dx + dy * dy) * 1.4;
                        const vig = Math.max(0, 1 - vigDist * preset.vignette * 2);

                        // Halation (bloom on bright highlights)
                        let hr = 0, hg = 0, hb = 0;
                        if (preset.halation) {
                            const luma = (pr + pg + pb) / 3;
                            const hStrength = Math.max(0, (luma - 180) / 75) * 0.6;
                            hr = preset.halation[0] * hStrength;
                            hg = preset.halation[1] * hStrength;
                            hb = preset.halation[2] * hStrength;
                        }

                        const idx = (y * W + x) * 4;
                        d[idx]     = Math.min(255, Math.max(0, (pr + gAmt + hr) * vig));
                        d[idx + 1] = Math.min(255, Math.max(0, (pg + gAmt + hg) * vig));
                        d[idx + 2] = Math.min(255, Math.max(0, (pb + gAmt + hb) * vig));
                        d[idx + 3] = 255;
                    }
                }
                ctx.putImageData(raw, 0, 0);

                // Letterbox bars (cinematic)
                ctx.fillStyle = 'rgba(0,0,0,0.85)';
                ctx.fillRect(0, 0, W, H * 0.045);
                ctx.fillRect(0, H - H * 0.045, W, H * 0.045);
            }

            // ── STATE ────────────────────────────────────────────────
            let current = 0;
            let paused = false;
            let countdown = 10;
            let countdownTimer = null;
            let flipTimer = null;
            let activeCanvas = 'a'; // which canvas is showing

            // Dot nav
            const dotsEl = document.getElementById('ps-dots');
            PRESETS.forEach((p, i) => {
                const dot = document.createElement('button');
                dot.className = 'ps-dot' + (i === 0 ? ' active' : '');
                dot.addEventListener('click', () => goTo(i));
                dotsEl.appendChild(dot);
            });

            function updateInfo(idx) {
                const p = PRESETS[idx];
                document.getElementById('ps-brand').textContent = p.brand;
                document.getElementById('ps-name').textContent  = p.name;
                document.getElementById('ps-desc').textContent  = p.desc;
                document.getElementById('ps-film-badge').textContent = p.brand.toUpperCase().slice(0, 6);
                document.getElementById('ps-index').textContent = String(idx + 1).padStart(2, '0');
                // Tags
                const tagsEl = document.getElementById('ps-tags');
                tagsEl.innerHTML = p.tags.map(t => `<span class="ps-tag">${t}</span>`).join('');
                // Meta
                const icons = ['ph-gradient', 'ph-dots-nine', 'ph-sun-dim'];
                const metaEl = document.getElementById('ps-meta');
                metaEl.innerHTML = p.meta.map((m, mi) =>
                    `<span class="ps-meta-item"><i class="ph ${icons[mi % icons.length]}"></i> ${m}</span>`
                ).join('');
                // Dots
                document.querySelectorAll('.ps-dot').forEach((d, di) => d.classList.toggle('active', di === idx));
            }

            function goTo(idx) {
                if (idx === current) return;
                const nextPreset = PRESETS[idx];
                // Render next frame on inactive canvas
                const nextCtx = activeCanvas === 'a' ? ctxB : ctxA;
                const nextCv  = activeCanvas === 'a' ? cvB  : cvA;

                renderScene(nextCtx, nextPreset, idx * 1000);
                updateInfo(idx);

                // Crossfade
                if (activeCanvas === 'a') {
                    cvB.classList.add('visible');
                    setTimeout(() => { cvA.style.opacity = '0'; }, 50);
                    activeCanvas = 'b';
                } else {
                    cvA.style.opacity = '1';
                    cvB.classList.remove('visible');
                    activeCanvas = 'a';
                }

                current = idx;
                resetCountdown();
            }

            function advance() {
                goTo((current + 1) % PRESETS.length);
            }

            function resetCountdown() {
                countdown = 10;
                document.getElementById('ps-countdown').textContent = countdown;
                document.getElementById('ps-progress-fill').style.width = '0%';
                clearInterval(countdownTimer);
                if (!paused) startCountdown();
            }

            function startCountdown() {
                countdownTimer = setInterval(() => {
                    countdown--;
                    document.getElementById('ps-countdown').textContent = Math.max(0, countdown);
                    const pct = ((10 - countdown) / 10) * 100;
                    document.getElementById('ps-progress-fill').style.width = pct + '%';
                    if (countdown <= 0) {
                        clearInterval(countdownTimer);
                        advance();
                    }
                }, 1000);
            }

            // Initial render
            renderScene(ctxA, PRESETS[0], 0);
            updateInfo(0);
            startCountdown();

            // Controls
            document.getElementById('ps-prev').addEventListener('click', () => {
                goTo((current - 1 + PRESETS.length) % PRESETS.length);
            });
            document.getElementById('ps-next').addEventListener('click', () => {
                goTo((current + 1) % PRESETS.length);
            });
            document.getElementById('ps-play').addEventListener('click', () => {
                paused = !paused;
                const icon = document.getElementById('ps-play-icon');
                if (paused) {
                    icon.className = 'ph ph-play';
                    clearInterval(countdownTimer);
                } else {
                    icon.className = 'ph ph-pause';
                    startCountdown();
                }
            });
        })();
    </script>
</body>

</html>